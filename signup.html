<!-- 회원가입 페이지 -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>회원가입 페이지</title>
  <link rel="stylesheet" href="common.css">
  <!-- <script src="validation.js"></script> -->
  <style>
    #container {
      justify-content: center;
      align-items: center;
      flex-direction: row;
      height: 70vh;
    }
    #container > #forms {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 35vw;
      height: 60vh;
      color: grey;
      margin-left: 30vw;
    }
    #container > #errors {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 35vw;
      height: 60vh;
      color: grey;
    }
    #errors > div{
      margin-top: 10vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: start;
      width: 35vw;
      height: 30vh;
      margin: 2rem;
    }
    #errors > div > #UserName_error, #ID_error, #PW_error, #PW_check_error, #Email_error {
      width: 25rem;
      height: 3vh;
      border: none;
      text-align: center;
      vertical-align: middle;
      margin: 2px;

      font-weight: bolder;
      color: #ff003e;
      display: inline-block;
    }
    
    form {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: end;
      margin: 2rem;
      width: 35vw;
      height: 30vh;
      font-family: inter;
      font-weight: 400;
      font-size: 24px;
      font-style: italic;
      color: grey;
    }
    div [type="text"] { 
      margin-left: 10px;
      width: 20rem;
      height: 3vh;
      background-color: #D9D9D9;
      border: none;
    }
    div [type="password"] {
      margin-left: 10px;
      width: 20rem;
      height: 3vh;
      background-color: #d9d9d9;
      border: none;
      -webkit-text-stroke: 0.1px black;
    }
    div [type="submit"] {
      margin-top: 1vh;
      margin-bottom: 1vh;
      width: 7vw;
      height: 3vh;
      background-color: #FF6666;
      color: white;
      font-family: Inter;
      font-size: 24px;
      font-weight: bolder;
      text-align: center;
      border: none;
      border-radius: 8%;
    }
    @media screen and (max-width: 1365px){
      #signup {
        width: 7rem;
      }
    }
    @media screen and (max-width: 1365px){
      div [type="text"], div [type="password"] {
        width: 20rem;
      }
      #container div {
        width: 50rem;
      }
    }
    #hidden {
      width: 7vw;
      height: 3vh;
      margin-top: 1vh;
      margin-bottom: 1vh;
    }
  </style>

</head>
<body>
  <div id="root">
    <div id="header"></div>
    <div id="container">
        <!-- todo action 나중에 채우기 -->
        <div id="forms">
        <form action="" method="get">
          <div id="UserName">
            User Name<input type="text" id="UserName_content" placeholder="사용자 이름을 입력하세요">
          </div>
          <div id="ID">
            ID<input type="text" id="ID_content" placeholder="사용할 ID를 입력하세요">
          </div>
          <div id="PW">           
            PW<input type="password" id="PW_content" placeholder="사용할 비밀번호를 입력하세요">
          </div>
          <div id="PW_check">           
            PW<input type="password" id="PW_content_check" placeholder="사용할 비밀번호를 입력하세요">
          </div>
          <div id="Email">
            Email<input type="text" id="Email_content" placeholder="사용할 이메일 주소를 입력하세요">
          </div>
          <input type="submit" id="signup" value="회원가입">
        </form>
      </div>
      <div id="errors">
        <div>
          <div id="UserName_error"></div>
          <div id="ID_error"></div>
          <div id="PW_error"></div>
          <div id="PW_check_error"></div>
          <div id="Email_error"></div>
          <div id="hidden"></div>
      </div>
      </div>
    </div>
    <div id="footer"></div>
  </div>
  <script>
    const root = document.getElementById("root");
    const container = document.getElementById("container");
    const ID = document.getElementById("ID");
    const ID_content = document.getElementById("ID_content");
    const ID_error = document.getElementById("ID_error");
    const UserName_content = document.getElementById("UserName_content");
    const PW_content = document.getElementById("PW_content");
    const PW_content_check = document.getElementById("PW_content_check");
    const Email_content = document.getElementById("Email_content")
    
    // UserName 한글 금지
    // UserName_content = 

    ID_content.addEventListener("keydown", () => {
      for (i=0; i < ID_content.value.length; i++){
        const keyArr = [];
        keyArr[i] = ID_content.value
        console.log(keyArr);
        
        // ID는 6자리 이상
        // 6자리 미만일 때, 경고!
        if (ID_content.value.length < 5){
          ID_alert();
        }
        // 6자리 이상이면 경고 해제
        else if (ID_content.value.length >= 5){
          ID_error.innerText = "";
        }
      }
      })
    
    
    ID_content.addEventListener('keydown', (event) => {
        
        // todo 한국어 금지
        if (ID_content.value === "KOREAN"){
          console.error("ID로 사용할 수 없습니다.")
        }
        else {
          console.log("사용가능한 ID입니다.");
        }}
      );
      
      // ID_경고
      function ID_alert(){
        ID_error.innerText = "ID는 6자리 이상으로 생성해주세요.";
      }

      const ID_letter = '#';     
      // ID가 대문자+소문자 조합인지 확인하는 로직 함수화
      function ID_check() {
        if (ID_letter.toUpperCase() === ID_letter && ID_letter.toLowerCase() === ID_letter ){
          console.error("소문자인지 대문자인지 구별할 수 없습니다!");
        }
        else if (ID_letter.toUpperCase() === ID_letter){
          console.error("대문자로만 구성된 ID입니다.");
        }
        else if (ID_letter.toLowerCase() === ID_letter){
          console.error("소문자로만 구성된 ID입니다.");
        }
        else if (ID_letter.toUpperCase() !== ID_letter && ID_letter.toLowerCase() !== ID_letter){
          console.log("사용 가능한 ID입니다.")
        }
}


// 입력된 비밀번호 두 개가 동일한지 확인
function PW_checking(){
  if (PW_content.value === PW_content_check.value) {
    PW_content_check.setCustomValidity("");
  }
  else {
    PW_content_check.setCustomValidity("패스워드가 일치하지 않습니다.");
}
}
PW_content.onchange = PW_checking;
PW_content_check.onkeyup = PW_checking;


// Email 형식 확인 (@ & .)
const EmailArr = [];
Email_content.value = "bhn@naver";
EmailArr.push(Email_content.value);
console.log(EmailArr)
// arr.includes() 메서드로 배열 조회하기
if (EmailArr.includes("@") !== true ){
  Email_content.setCustomValidity("이메일 형식에는 '@'가 포함되어야 합니다.");
}
else if (EmailArr.includes(".") !== true ){
    Email_content.setCustomValidity("이메일 형식에는 '.'이 포함되어야 합니다.");
}

const testArr = ["bhn@naver"];
console.log(testArr.includes("bhn@naver")); // true
// -> 배열의 인덱스를 지정해주고 나서 조회에 성공함
console.log(testArr[0].includes("bhn@")); // true
      </script>
</body>
</html>